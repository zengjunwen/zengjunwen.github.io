---
slug: 2023-08-28 ARTS
title: 2023-08-28 ARTS
authors:
  name: Jon
  title: ğŸ˜Œ
  url: https://github.com
  image_url: https://avatars.githubusercontent.com/u/21982782?s=96&v=4
tags: [ARTS]


---

### A

doing

### R

æœ€è¿‘åœ¨é˜…è¯»ç³»ç»Ÿè®¾è®¡çš„è‹±æ–‡ç‰ˆï¼Œå…·ä½“çš„å†…å®¹æˆ‘ä»¬åœ¨Séƒ¨åˆ†è¿›è¡Œåˆ†äº«ã€‚

### T
æœ€è¿‘å‡†å¤‡å‡ºè¡Œï¼Œéœ€è¦è´­ä¹°8å¼ æœºç¥¨ï¼Œä¸ºäº†å‰©äº›é’±ï¼Œéœ€è¦æ—¶åˆ»å…³æ³¨æœºç¥¨çš„ä»·æ ¼å˜åŒ–ï¼Œæ¯æ¬¡æ‰‹åŠ¨æŸ¥ç¥¨éƒ½å¾ˆéº»çƒ¦ã€‚ äº†è§£äº†ä¸‹pythonçš„seleniumåº“ï¼Œèƒ½å¤Ÿçœå»ä¸€äº›æ“ä½œã€‚
ä¸‹é¢ç®€å•æ¼”ç¤ºä¸‹å®‰è£…å’Œæ“ä½œæ–¹æ³•ã€‚

#### å®‰è£…chromedriver

æ³•ä¸€ï¼š

```bash
$ brew install chromedriver
$ chromedriver --version
ChromeDriver 116.0.5845.96 (1a391816688002153ef791ffe60d9e899a71a037-refs/branch-heads/5845@{#1382})
```

æ³•äºŒï¼š

ä» https://googlechromelabs.github.io/chrome-for-testing/ ä¸‹è½½chromedrive

å°†å¯æ‰§è¡Œæ–‡ä»¶æ”¾å…¥åˆ°`/usr/local/bin`

#### å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„Chrom

ç‰ˆæœ¬å°½é‡ä¸€è‡´ã€‚https://googlechromelabs.github.io/chrome-for-testing/

#### è¿è¡Œ

```python
import time
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
# å¯åŠ¨æµè§ˆå™¨
chrome_options = webdriver.ChromeOptions()
chrome_options.add_argument("--user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.131 Safari/537.36")

driver = webdriver.Chrome("/opt/homebrew/bin/chromedriver",options=chrome_options)  # éœ€è¦å®‰è£… Chrome æµè§ˆå™¨å’Œå¯¹åº”çš„ ChromeDriver
driver.get("https://www.csair.com/cn/")  # æ›¿æ¢ä¸ºä½ è¦çˆ¬å–çš„æœºç¥¨ç½‘ç«™ URL
time.sleep(1)

# å®šä½å¹¶å¡«å†™å‡ºå‘åœ°å’Œç›®çš„åœ°
departure_input = driver.find_element_by_id("fDepCity")  # æ ¹æ®å®é™…ç½‘é¡µçš„å…ƒç´  ID è¿›è¡Œå®šä½
departure_input.clear()  # æ¸…ç©ºè¾“å…¥æ¡†å†…å®¹
departure_input.send_keys("éƒ‘å·")  # å¡«å…¥å‡ºå‘åœ°
time.sleep(1)

destination_input = driver.find_element_by_id("fArrCity")  # æ ¹æ®å®é™…ç½‘é¡µçš„å…ƒç´  ID è¿›è¡Œå®šä½
destination_input.clear()  # æ¸…ç©ºè¾“å…¥æ¡†å†…å®¹
destination_input.send_keys("è´µé˜³")  # å¡«å…¥ç›®çš„åœ°
time.sleep(1)

# é€‰æ‹©å‡ºå‘æ—¶é—´
date_script = '''
var departure_time_input = document.getElementById("fDepDate");  // æ ¹æ®å®é™…ç½‘é¡µçš„å…ƒç´  ID è¿›è¡Œå®šä½
departure_time_input.removeAttribute("readonly");  // ç§»é™¤ readonly å±æ€§
departure_time_input.value = "2023-09-18";  // è®¾ç½®æ—¥æœŸï¼Œæ›¿æ¢ä¸ºä½ æƒ³é€‰æ‹©çš„æ—¥æœŸ
'''
driver.execute_script(date_script)
time.sleep(1)

# å®šä½å¹¶ç‚¹å‡»"ç«‹å³æŸ¥è¯¢"æŒ‰é’®
search_button = driver.find_element_by_class_name("searchBtn")  # æ ¹æ®æŒ‰é’®çš„ç±»åè¿›è¡Œå®šä½
search_button.click()  # ç‚¹å‡»æŒ‰é’®
```



### S

å¦‚ä½•è¿›è¡Œç³»ç»Ÿåˆ†æè®¾è®¡ï¼Ÿ

#### Step 1 éœ€æ±‚æ¾„æ¸…

å°½å¯èƒ½çš„äº†è§£éœ€è¦è§£å†³çš„é—®é¢˜è¾¹ç•Œã€‚ç³»ç»Ÿè®¾è®¡æ˜¯ä¸€ä¸ªå¼€æ”¾å¼é—®é¢˜ï¼Œæ²¡æœ‰ä¸€ä¸ªæ ‡å‡†ç­”æ¡ˆï¼Œæ‰€ä»¥åœ¨è¿›è¡Œç³»ç»Ÿè®¾è®¡å‰ï¼Œæˆ‘ä»¬è¦ææ¸…æ¥šé‚£äº›æ¨¡å‡Œä¸¤å¯çš„é—®é¢˜ã€‚

#### Step 2 æ¥å£å®šä¹‰

å®šä¹‰ç³»ç»Ÿéœ€è¦æä¾›çš„æ¥å£ã€‚è¿™ä¸ä»…å°†å»ºç«‹ç³»ç»Ÿæ‰€æœŸæœ›çš„ç¡®åˆ‡åˆåŒï¼Œè€Œä¸”è¿˜å°†ç¡®ä¿æˆ‘ä»¬æ²¡æœ‰å¾—åˆ°ä»»ä½•é”™è¯¯çš„éœ€æ±‚ã€‚

#### Step 3 ç²—ç•¥çš„è¯„ä¼°

åˆæœŸï¼Œç²—ç•¥è€ƒè™‘ç³»ç»Ÿçš„æ‰©å±•æ€§æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œæœ‰åŠ©äºåœ¨æœªæ¥èšç„¦åˆ†åŒºã€è´Ÿè½½å‡è¡¡å’Œç¼“å­˜ç­‰è®¾è®¡ã€‚è¿™é‡Œå¯ä»¥å…ˆè€ƒè™‘ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š
* ç³»ç»Ÿå¤§æ¦‚éœ€è¦å¤šå°‘å­˜å‚¨
* ç³»ç»Ÿçš„è¯·æ±‚é‡æ˜¯å¤šå°‘ï¼Ÿéœ€è¦çš„å¸¦å®½å¤§æ¦‚æ˜¯å¤šå°‘ã€‚

#### Step 4 å®šä¹‰æ•°æ®æ¨¡å‹

å®šä¹‰æ•°æ®æ¨¡å‹èƒ½å¤Ÿæ¸…æ™°çš„è¡¨è¾¾æ•°æ®åœ¨ç³»ç»Ÿçš„ä¸åŒç»„å»ºä¹‹é—´æ˜¯å¦‚ä½•æµåŠ¨çš„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æˆ‘ä»¬è¿›è¡Œæ•°æ®åˆ†åŒºçš„åŸºç¡€ã€‚

#### Step 5 é«˜å±‚æ¬¡çš„è®¾è®¡

ä»å®è§‚è§’åº¦ç”»ä¸€ä¸ªå„æ¨¡å—çš„æ¡†å›¾ï¼Œå¤§æ¦‚å¦‚ä¸‹ï¼š

![image-20230903215608188](./assets/image-20230903215608188.png)

#### Step 6 è¯¦ç»†è®¾è®¡

æ·±å…¥æ¯ä¸ªæ¨¡å—è¿›è¡Œè¯¦ç»†è®¾è®¡ï¼Œå¯¹äºä¸åŒåœºæ™¯æœ‰ä¸åŒçš„è®¾è®¡æ–¹æ³•ï¼Œé˜è¿°æ¯ç§æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ã€‚

#### Step 7 è¯†åˆ«å¹¶è§£å†³ç³»ç»Ÿç“¶é¢ˆ

ä¾‹å¦‚ï¼š

1. ç³»ç»Ÿæ˜¯å¦æœ‰å•ç‚¹æ•…éšœï¼Ÿ
2. æ•°æ®æ˜¯å¦éœ€è¦å‰¯æœ¬ï¼Ÿ
3. å¦‚ä½•ç›‘æ§ç³»ç»Ÿçš„æ€§èƒ½ï¼Ÿ
